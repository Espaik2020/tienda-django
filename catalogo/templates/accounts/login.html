{# templates/account/login.html #}
{% extends "base.html" %}

{% block title_tag %}Iniciar sesión · DNM Wear{% endblock %}

{% block extra_css %}
<style>
  .auth-page {
    min-height: calc(100vh - 160px);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .auth-card {
    max-width: 460px;
    width: 100%;
    border-radius: 28px;
    padding: 2.5rem 2.25rem;
    background:
      radial-gradient(120% 160% at 0% 0%, rgba(46,230,168,.22), transparent 55%),
      radial-gradient(140% 200% at 100% 0%, rgba(122,162,255,.20), transparent 55%),
      rgba(4, 8, 20, .96);
    border: 1px solid rgba(255,255,255,.08);
    box-shadow:
      0 20px 60px rgba(0,0,0,.8),
      0 0 0 1px rgba(255,255,255,.02);
    color: #e6f1ff;
  }

  /* ===== TÍTULO CON EFECTO ARCOÍRIS ===== */
  .auth-title {
    font-family: "Outfit", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    font-weight: 900;
    letter-spacing: .18em;
    text-transform: uppercase;
    font-size: 1.35rem;
    text-align: center;
    margin-bottom: 1.25rem;
    position: relative;
  }
  .auth-title span {
    display: inline-block;
    background: linear-gradient(90deg,#ff5f6d 0%,#ffc371 20%,#65ffe1 40%,#7aa2ff 60%,#e07bff 80%,#ff5f6d 100%);
    background-size: 300% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: menuShine 6s linear infinite, hueCycle 12s linear infinite;
  }
  .auth-title::after {
    content: "";
    display: block;
    height: 2px;
    width: 70%;
    margin: .75rem auto 0;
    border-radius: 999px;
    background: linear-gradient(90deg,#ff5f6d,#ffc371,#65ffe1,#7aa2ff,#e07bff,#ff5f6d);
    opacity: .9;
  }

  .auth-subtitle {
    text-align: center;
    font-size: .9rem;
    color: #9ba4d4;
    margin-bottom: 1.75rem;
  }

  .auth-label {
    font-size: .82rem;
    text-transform: uppercase;
    letter-spacing: .08em;
    font-weight: 700;
    color: #cfd8ff;
    margin-bottom: .25rem;
  }

  /* Estilizar inputs que pinta allauth */
  .auth-card input[type="text"],
  .auth-card input[type="email"],
  .auth-card input[type="password"] {
    background: rgba(5, 10, 26, .9);
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.14);
    color: #f4f7ff;
    font-size: .95rem;
    padding-inline: 1rem;
    height: 44px;
    width: 100%;
  }
  .auth-card input[type="text"]:focus,
  .auth-card input[type="email"]:focus,
  .auth-card input[type="password"]:focus {
    border-color: #2EE6A8;
    box-shadow: 0 0 0 1px color-mix(in oklab, #2EE6A8 70%, transparent);
    background: rgba(5, 10, 26, 1);
    color: #fff;
  }

  .auth-help {
    font-size: .85rem;
    color: #9ba4d4;
  }
  .auth-help a {
    color: #2EE6A8;
    text-decoration: none;
  }
  .auth-help a:hover {
    text-decoration: underline;
  }
  .auth-divider {
    height: 1px;
    width: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
    margin: 1.25rem 0;
  }

  @keyframes menuShine{
    0%{background-position:0% center}
    100%{background-position:300% center}
  }
  @keyframes hueCycle{
    0%{filter:hue-rotate(0deg) saturate(120%)}
    100%{filter:hue-rotate(360deg) saturate(120%)}
  }
</style>
{% endblock %}

{% block content %}
<div class="auth-page container">
  <div class="auth-card">

    <h1 class="auth-title"><span>Iniciar sesión</span></h1>
    <p class="auth-subtitle">
      Accede a tu cuenta para seguir tus pedidos y guardar tus productos favoritos.
    </p>

    {# Errores generales del formulario (credenciales incorrectas, cuenta inactiva, etc.) #}
    {% if form.non_field_errors %}
      <div class="alert alert-danger py-2 mb-3">
        {{ form.non_field_errors|striptags }}
      </div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}

      {# Campo next / redirect (versión allauth) #}
      {% if redirect_field_value %}
        <input type="hidden"
               name="{{ redirect_field_name }}"
               value="{{ redirect_field_value }}">
      {% endif %}

      <div class="mb-3">
        <label class="auth-label" for="{{ form.login.id_for_label }}">
          NOMBRE DE USUARIO O EMAIL
        </label>
        {{ form.login }}
        {% if form.login.errors %}
          <div class="text-danger small mt-1">
            {{ form.login.errors|striptags }}
          </div>
        {% endif %}
      </div>

      <div class="mb-1">
        <label class="auth-label d-flex justify-content-between align-items-center"
               for="{{ form.password.id_for_label }}">
          <span>CONTRASEÑA</span>
          <a href="{% url 'account_reset_password' %}"
             class="small text-decoration-none" style="color:#2EE6A8;">
            ¿Olvidaste tu contraseña?
          </a>
        </label>
        {{ form.password }}
        {% if form.password.errors %}
          <div class="text-danger small mt-1">
            {{ form.password.errors|striptags }}
          </div>
        {% endif %}
      </div>

      {% if form.remember %}
        <div class="form-check mt-2 mb-3">
          {{ form.remember }}
          <label class="form-check-label small" for="{{ form.remember.id_for_label }}">
            Recordarme en este dispositivo
          </label>
        </div>
      {% endif %}

      <button type="submit" class="btn btn-neon w-100 mt-3">
        Entrar
      </button>
    </form>

    <div class="auth-divider"></div>

    <p class="auth-help text-center mb-0">
      ¿No tienes cuenta?
      <a href="{% url 'account_signup' %}{% if redirect_field_value %}?{{ redirect_field_name }}={{ redirect_field_value }}{% endif %}">
        Regístrate
      </a>
    </p>
  </div>
</div>
{% endblock %}


