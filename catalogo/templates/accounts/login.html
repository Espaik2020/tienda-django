{# templates/account/login.html #}
{% extends "base.html" %}

{% block title_tag %}Iniciar sesión · DNM Wear{% endblock %}

{% block extra_css %}
<style>
  .auth-page {
    min-height: calc(100vh - 160px);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .auth-card {
    max-width: 460px;
    width: 100%;
    border-radius: 28px;
    padding: 2.5rem 2.25rem;
    background:
      radial-gradient(120% 160% at 0% 0%, rgba(46,230,168,.22), transparent 55%),
      radial-gradient(140% 200% at 100% 0%, rgba(122,162,255,.20), transparent 55%),
      rgba(4, 8, 20, .96);
    border: 1px solid rgba(255,255,255,.08);
    box-shadow:
      0 20px 60px rgba(0,0,0,.8),
      0 0 0 1px rgba(255,255,255,.02);
    color: #e6f1ff;
  }
  .auth-title {
    font-family: "Outfit", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    font-weight: 800;
    letter-spacing: .04em;
    text-transform: uppercase;
    font-size: 1.3rem;
    text-align: center;
    margin-bottom: 1.5rem;
  }
  .auth-subtitle {
    text-align: center;
    font-size: .9rem;
    color: #9ba4d4;
    margin-bottom: 1.5rem;
  }
  .auth-label {
    font-size: .82rem;
    text-transform: uppercase;
    letter-spacing: .08em;
    font-weight: 700;
    color: #cfd8ff;
    margin-bottom: .25rem;
  }
  .auth-card .form-control {
    background: rgba(5, 10, 26, .9);
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.14);
    color: #f4f7ff;
    font-size: .95rem;
    padding-inline: 1rem;
    height: 44px;
  }
  .auth-card .form-control:focus {
    border-color: #2EE6A8;
    box-shadow: 0 0 0 1px color-mix(in oklab, #2EE6A8 70%, transparent);
    background: rgba(5, 10, 26, 1);
    color: #fff;
  }
  .auth-help {
    font-size: .85rem;
    color: #9ba4d4;
  }
  .auth-help a {
    color: #2EE6A8;
    text-decoration: none;
  }
  .auth-help a:hover {
    text-decoration: underline;
  }
  .auth-divider {
    height: 1px;
    width: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
    margin: 1.25rem 0;
  }
</style>
{% endblock %}

{% block content %}
<div class="auth-page container">
  <div class="auth-card">

    <h1 class="auth-title">Iniciar sesión</h1>
    <p class="auth-subtitle">
      Accede a tu cuenta para seguir tus pedidos y guardar tus productos favoritos.
    </p>

    {% if form.non_field_errors %}
      <div class="alert alert-danger py-2">
        {{ form.non_field_errors|striptags }}
      </div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ next }}">

      <div class="mb-3">
        <label class="auth-label" for="{{ form.login.id_for_label }}">
          Nombre de usuario o email
        </label>
        {{ form.login }}
        {% if form.login.errors %}
          <div class="text-danger small mt-1">{{ form.login.errors|striptags }}</div>
        {% endif %}
      </div>

      <div class="mb-1">
        <label class="auth-label d-flex justify-content-between align-items-center"
               for="{{ form.password.id_for_label }}">
          <span>Contraseña</span>
          <a href="{% url 'account_reset_password' %}" class="small text-decoration-none" style="color:#2EE6A8;">
            ¿Olvidaste tu contraseña?
          </a>
        </label>
        {{ form.password }}
        {% if form.password.errors %}
          <div class="text-danger small mt-1">{{ form.password.errors|striptags }}</div>
        {% endif %}
      </div>

      {% if form.remember %}
        <div class="form-check mt-2 mb-3">
          {{ form.remember }}
          <label class="form-check-label small" for="{{ form.remember.id_for_label }}">
            Recordarme en este dispositivo
          </label>
        </div>
      {% endif %}

      <button type="submit" class="btn btn-neon w-100 mt-2">
        Entrar
      </button>
    </form>

    <div class="auth-divider"></div>

    <p class="auth-help text-center mb-0">
      ¿No tienes cuenta?
      <a href="{% url 'account_signup' %}{% if next %}?next={{ next }}{% endif %}">
        Regístrate
      </a>
    </p>
  </div>
</div>
{% endblock %}

